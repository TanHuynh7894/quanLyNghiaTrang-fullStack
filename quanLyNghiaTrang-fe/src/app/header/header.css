/* ===============================
   Header — v4 (SVG waveform stems)
   =============================== */

:host {
  --z-header: 1000;
  --z-header-ctrl: 1002;
  --z-menu-toggle: 2001;
  --z-when-menu-open: 2002;

  --clr-text: #1f2937;
  --clr-text-muted: #374151;
  --clr-placeholder: #9ca3af;
  --clr-surface: #ffffff;
  --clr-surface-hover: #f3f4f6;
  --clr-border: #e5e7eb;
  --clr-ring: rgba(14,165,233,.35);
  --clr-ring-soft: rgba(14,165,233,.15);

  --clr-accent: #0ea5e9;
  --clr-accent-soft: #e0f2fe;

  --clr-danger: #ff3b30;
  --clr-danger-hover: #ff5e57;

  --radius-full: 9999px;
  --radius-md: 8px;

  --shadow-sm: 0 1px 2px rgba(0,0,0,.05);
  --shadow-md: 0 8px 24px rgba(0,0,0,.15);
  --shadow-md-strong: 0 8px 24px rgba(0,0,0,.18);
}

/* Header */
.app-header{
  position: absolute; top: 0; margin-top: 5px; width: 100%;
  padding: 10px 20px; display:flex; align-items:center; justify-content:space-between;
  box-sizing: border-box; z-index: var(--z-header); background: transparent;
}
.header-left,.header-right{ flex-shrink:0; z-index: var(--z-header-ctrl); }
.project-title{ font-size:1.5rem; font-weight:700; color:#000; }

/* Menu toggle */
.menu-toggle-button{ background:transparent; border:none; cursor:pointer; padding:0; z-index:var(--z-menu-toggle); }
.menu-toggle-button span{ font-size:1.8rem; color:#000; }
.menu-toggle-button.close-style span{ font-size:3rem; font-weight:300; line-height:1; }

/* Search box */
.gmaps-search{
  position:absolute; top:16px; left:80px;
  display:flex; align-items:center; gap:8px;
  padding:6px 8px; width:560px; height:44px;
  border-radius: var(--radius-full);
  background: var(--clr-surface); color: var(--clr-text);
  box-shadow: var(--shadow-sm), var(--shadow-md);
  z-index: var(--z-header);
}
.gmaps-search:focus-within{
  box-shadow: 0 0 0 3px var(--clr-ring-soft), var(--shadow-md-strong);
}

/* Input */
#map-search{
  width:100%; height:36px; padding:0 10px; font-size:16px;
  background:transparent; border:none; outline:none; color:var(--clr-text);
}
#map-search::placeholder{ color: var(--clr-placeholder); }

/* Icon buttons */
.icon-btn{
  width:36px; height:36px; border-radius: var(--radius-full);
  border:none; outline:none; background:transparent; color:var(--clr-text-muted);
  display:grid; place-items:center; cursor:pointer;
  transition: background .2s, transform .1s, color .2s, opacity .2s;
}
.icon-btn:hover{ background: var(--clr-surface-hover); }
.icon-btn:active{ transform: translateY(1px); }
.icon-btn:disabled{ opacity:.5; cursor:not-allowed; }
.icon-btn.mic.is-uploading{ color:#fff; background:#6b7280; }

.icon-btn.trash{ color:#ef4444; }
.icon-btn.trash:hover{ background:#fee2e2; }

.icon-btn.send{ color:#0ea5e9; }
.icon-btn.send:hover{ background:#e0f2fe; }

/* SVG waveform */
.rec-svg{
  flex:1;
  height:36px;       /* chỉnh độ cao hiển thị */
  display:block;
}
.rec-svg .baseline{
  stroke:#111; stroke-width:1; opacity:.4;
}
.rec-svg .stem{
  stroke:#111;
  stroke-width:2;
  stroke-linecap:round;
  transition: y1 .06s linear, y2 .06s linear;
}

/* Options (Khu/Hàng/Ô) */
.gmaps-options{
  position:absolute; top:22px; left: 660px; display:flex; gap:10px; z-index:var(--z-header);
}
.dropdown{
  width:120px; padding:8px 12px; border-radius: var(--radius-md);
  border:1px solid #ccc; background:var(--clr-surface); font-size:14px;
  transition: border-color .2s, box-shadow .2s;
}
.dropdown:focus{ outline:none; border-color:#1976d2; box-shadow:0 0 4px rgba(25,118,210,.5); }

/* Spinner */
.spinner{
  width:16px; height:16px; border-radius:50%;
  border:2px solid currentColor; border-top-color:transparent;
  animation: spin .9s linear infinite;
}
@keyframes spin{ to{ transform: rotate(360deg); } }

/* Hide search & options when menu open */
:host(.header-menu-open) .gmaps-search,
:host(.header-menu-open) .gmaps-options{
  visibility:hidden; opacity:0;
  transition: opacity .2s ease-in-out, visibility 0s linear .2s;
}
.gmaps-search,.gmaps-options{ visibility:visible; opacity:1; transition: opacity .2s ease-in-out; }
:host(.header-menu-open) .app-header{ z-index: var(--z-when-menu-open); }

/* Error line */
.error{
  position:absolute; top:86px; left:80px;
  color:#c62828; background:rgba(255,255,255,.95);
  padding:4px 8px; border-radius:6px; box-shadow: var(--shadow-sm); z-index:var(--z-header);
}

/* Responsive */
@media (max-width: 1200px){
  .gmaps-search{ left:64px; width:520px; }
  .gmaps-options{ left: 600px; }
}
@media (max-width: 992px){
  .gmaps-search{ left:56px; width:76vw; }
  .gmaps-options{ position: static; margin-left:56px; margin-top:64px; }
}
@media (max-width: 420px){
  .gmaps-search{ height:52px; padding:8px; width:min(92vw,360px); left:12px; }
  .icon-btn{ width:34px; height:34px; }
}
